<!-- © 2024 TINI COMPANY - CONFIDENTIAL -->
<!-- Employee: rongdeptrai-vl <rongdz2307@gmail.com> -->
<!-- Commit: ebdabf3 | Time: 2025-08-09T05:09:14Z -->
<!-- Watermark: TINI_1754716154_e868a412 | TINI_WATERMARK -->
<!-- WARNING: Unauthorized distribution is prohibited -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chrome API Test</title>
</head>
<body>
    <h1>Chrome API Test</h1>
    <p id="status">Testing...</p>
    
    <script>
    // Chrome API compatibility layer
    if (typeof chrome === 'undefined') {
        console.log('Chrome API not available, creating mock');
        window.chrome = {
            storage: {
                local: {
                    set: function(data, callback) {
                        console.log('Mock chrome.storage.local.set:', data);
                        Object.keys(data).forEach(key => {
                            localStorage.setItem(key, JSON.stringify(data[key]));
                        });
                        if (callback) callback();
                    },
                    get: function(keys, callback) {
                        console.log('Mock chrome.storage.local.get:', keys);
                        const result = {};
                        if (Array.isArray(keys)) {
                            keys.forEach(key => {
                                try {
                                    result[key] = JSON.parse(localStorage.getItem(key));
                                } catch (e) {
                                    result[key] = localStorage.getItem(key);
                                }
                            });
                        } else if (typeof keys === 'string') {
                            try {
                                result[keys] = JSON.parse(localStorage.getItem(keys));
                            } catch (e) {
                                result[keys] = localStorage.getItem(keys);
                            }
                        }
                        if (callback) callback(result);
                    }
                }
            }
        };
    }
    
    // Test the storage
    try {
        chrome.storage.local.set({testKey: 'testValue'}, () => {
            document.getElementById('status').textContent = 'Chrome storage mock working!';
            console.log('✅ Chrome storage test successful');
        });
    } catch (error) {
        document.getElementById('status').textContent = 'Error: ' + error.message;
        console.error('❌ Chrome storage test failed:', error);
    }
    </script>
</body>
</html>
